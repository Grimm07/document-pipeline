# Document Pipeline Worker Configuration
# Uses HOCON format with environment variable substitution

# PostgreSQL database configuration
database {
    jdbcUrl = "jdbc:postgresql://localhost:5432/document_pipeline"
    jdbcUrl = ${?DATABASE_URL}
    username = "pipeline"
    username = ${?DATABASE_USERNAME}
    password = "pipeline_secret"
    password = ${?DATABASE_PASSWORD}
    maxPoolSize = 5
    maxPoolSize = ${?DATABASE_MAX_POOL_SIZE}
}

# RabbitMQ configuration
rabbitmq {
    host = "localhost"
    host = ${?RABBITMQ_HOST}
    port = 5672
    port = ${?RABBITMQ_PORT}
    username = "guest"
    username = ${?RABBITMQ_USERNAME}
    password = "guest"
    password = ${?RABBITMQ_PASSWORD}
    virtualHost = "/"
    virtualHost = ${?RABBITMQ_VHOST}
}

# File storage configuration (for reading files)
storage {
    baseDir = "./document-storage"
    baseDir = ${?STORAGE_BASE_DIR}
}

# ML Classification service
mlService {
    baseUrl = "http://localhost:8000"
    baseUrl = ${?ML_SERVICE_URL}
    timeoutMs = 300000
    timeoutMs = ${?ML_SERVICE_TIMEOUT_MS}
}

# Metrics
metrics {
    port = 8081
    port = ${?WORKER_METRICS_PORT}
}

# Logging
logging {
    level = "INFO"
    level = ${?LOG_LEVEL}
}
